{"ast":null,"code":"var _jsxFileName = \"D:\\\\Coding\\\\project2\\\\crud-app-2\\\\client\\\\src\\\\components\\\\project_details\\\\deleteProject.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { Notification } from '../notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DeleteProject = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [showModal, setShowModal] = useState(false);\n  const [showNotification, setShowNotification] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [projectName, setProjectName] = useState('');\n  const [projectData, setProjectData] = useState(null);\n  const [notificationType, setNotificationType] = useState('');\n  useEffect(() => {\n    const fetchProject = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('No token found. Please log in first.');\n        return;\n      }\n      try {\n        const response = await axios.get(`/api/prj/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (response.status === 200) {\n          setProjectData(response.data);\n        } else {\n          alert('Error fetching project data');\n        }\n      } catch (err) {\n        console.error('Error fetching project data:', err);\n      }\n    };\n    fetchProject();\n  }, [id]);\n  const openModal = () => setShowModal(true);\n  const closeModal = () => setShowModal(false);\n  const handleDelete = async () => {\n    if (projectName !== `remove ${projectData === null || projectData === void 0 ? void 0 : projectData.projectName}`) {\n      alert('Project name does not match. Please type the correct project name to confirm deletion.');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await axios.delete(`/api/prj/delete/${id}`);\n      if (response.status === 200) {\n        setShowNotification(true);\n        setNotificationType('delete');\n        setShowModal(false);\n        setTimeout(() => {\n          navigate('/projects');\n        }, 1500);\n      } else {\n        alert('Something went wrong while deleting the project');\n      }\n    } catch (err) {\n      console.error('Error deleting project:', err);\n      alert('Error deleting project');\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bg-red-500 hover:bg-red-400 hover:scale-105 hover:-translate-y-[0,5] ease-in-out transition-all duration-75 active:bg-red-600 px-2 rounded-sm\",\n      onClick: openModal,\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"pr-2 text-xs fi fi-rr-trash\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), \"Delete\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 bg-white w-96 text-zinc-900\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-4 text-xl font-bold\",\n          children: \"Confirm Deletion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"To confirm the deletion of the project, please type\", ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: [\"\\\"remove \", projectData === null || projectData === void 0 ? void 0 : projectData.projectName, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this), \".\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 104\n          }, this), \"This action cannot be undone.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: projectName,\n            onChange: e => setProjectName(e.target.value),\n            className: \"w-full p-2 border rounded-sm ring-2 ring-zinc-400 focus:ring-teal-500 focus:outline-none\",\n            placeholder: `Type \"remove ${projectData === null || projectData === void 0 ? void 0 : projectData.projectName}\"`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDelete,\n            className: \"px-4 py-2 mr-2 text-white bg-red-500 rounded hover:bg-red-400\",\n            disabled: loading || projectName !== `remove ${projectData === null || projectData === void 0 ? void 0 : projectData.projectName}`,\n            children: loading ? 'Deleting...' : 'Delete Project'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: closeModal,\n            className: \"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-400\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this), showNotification && /*#__PURE__*/_jsxDEV(Notification, {\n      message: \"Project was deleted successfully!\",\n      onClose: () => setShowNotification(false),\n      className: notificationType === 'delete' ? 'bg-red-500' : 'bg-green-500'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(DeleteProject, \"BAFum7hLvr1FwHxww58I9CUHvZM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = DeleteProject;\nvar _c;\n$RefreshReg$(_c, \"DeleteProject\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","Notification","jsxDEV","_jsxDEV","DeleteProject","_s","id","navigate","showModal","setShowModal","showNotification","setShowNotification","loading","setLoading","projectName","setProjectName","projectData","setProjectData","notificationType","setNotificationType","fetchProject","token","localStorage","getItem","console","error","response","get","headers","status","data","alert","err","openModal","closeModal","handleDelete","delete","setTimeout","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","disabled","message","onClose","_c","$RefreshReg$"],"sources":["D:/Coding/project2/crud-app-2/client/src/components/project_details/deleteProject.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Notification } from '../notification'\r\n\r\nexport const DeleteProject = () => {\r\n    const { id } = useParams()\r\n    const navigate = useNavigate()\r\n\r\n    const [showModal, setShowModal] = useState(false)\r\n    const [showNotification, setShowNotification] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const [projectName, setProjectName] = useState('')\r\n    const [projectData, setProjectData] = useState(null)\r\n    const [notificationType, setNotificationType] = useState('')\r\n\r\n    useEffect(() => {\r\n        const fetchProject = async () => {\r\n            const token = localStorage.getItem('token'); \r\n            if (!token) {\r\n                console.error('No token found. Please log in first.');\r\n                return; \r\n            }\r\n            try {\r\n                const response = await axios.get(`/api/prj/${id}`, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                    },\r\n                });\r\n                if (response.status === 200) {\r\n                    setProjectData(response.data);\r\n                } else {\r\n                    alert('Error fetching project data');\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching project data:', err);\r\n            }\r\n        };\r\n        fetchProject();\r\n    }, [id]);\r\n\r\n    const openModal = () => setShowModal(true)\r\n\r\n    const closeModal = () => setShowModal(false)\r\n\r\n    const handleDelete = async () => {\r\n        if (projectName !== `remove ${projectData?.projectName}`) {\r\n            alert('Project name does not match. Please type the correct project name to confirm deletion.')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        try {\r\n            const response = await axios.delete(`/api/prj/delete/${id}`)\r\n            if (response.status === 200) {\r\n                setShowNotification(true)\r\n                setNotificationType('delete')\r\n                setShowModal(false)\r\n                setTimeout(() => {\r\n                    navigate('/projects')\r\n                }, 1500)\r\n            } else {\r\n                alert('Something went wrong while deleting the project')\r\n            }\r\n        } catch (err) {\r\n            console.error('Error deleting project:', err)\r\n            alert('Error deleting project')\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex\">\r\n            <button\r\n                className=\"bg-red-500 hover:bg-red-400 hover:scale-105 hover:-translate-y-[0,5] ease-in-out transition-all duration-75 active:bg-red-600 px-2 rounded-sm\"\r\n                onClick={openModal}\r\n            >\r\n                <i className=\"pr-2 text-xs fi fi-rr-trash\" />\r\n                Delete\r\n            </button>\r\n\r\n            {showModal && (\r\n                <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\">\r\n                    <div className=\"p-6 bg-white w-96 text-zinc-900\">\r\n                        <h2 className=\"mb-4 text-xl font-bold\">Confirm Deletion</h2>\r\n                        <p>\r\n                            To confirm the deletion of the project, please type{' '}\r\n                            <span className=\"font-semibold\">\"remove {projectData?.projectName}\"</span>.<br />\r\n                            This action cannot be undone.\r\n                        </p>\r\n                        <div className=\"mt-4\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={projectName}\r\n                                onChange={(e) => setProjectName(e.target.value)}\r\n                                className=\"w-full p-2 border rounded-sm ring-2 ring-zinc-400 focus:ring-teal-500 focus:outline-none\"\r\n                                placeholder={`Type \"remove ${projectData?.projectName}\"`}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex justify-end mt-6\">\r\n                            <button\r\n                                onClick={handleDelete}\r\n                                className=\"px-4 py-2 mr-2 text-white bg-red-500 rounded hover:bg-red-400\"\r\n                                disabled={loading || projectName !== `remove ${projectData?.projectName}`}\r\n                            >\r\n                                {loading ? 'Deleting...' : 'Delete Project'}\r\n                            </button>\r\n                            <button\r\n                                onClick={closeModal}\r\n                                className=\"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-400\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {showNotification && (\r\n                <Notification\r\n                    message=\"Project was deleted successfully!\"\r\n                    onClose={() => setShowNotification(false)}\r\n                    className={notificationType === 'delete' ? 'bg-red-500' : 'bg-green-500'}\r\n                />\r\n            )}\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}